"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.QueryPaginator = void 0;
const DynamoDbPaginator_1 = require("./DynamoDbPaginator");
class QueryPaginator extends DynamoDbPaginator_1.DynamoDbPaginator {
    constructor(client, input, limit) {
        super(limit);
        this.client = client;
        this.nextRequest = Object.assign({}, input);
    }
    getNext() {
        if (this.nextRequest) {
            return this.client.query(Object.assign(Object.assign({}, this.nextRequest), { Limit: this.getNextPageSize(this.nextRequest.Limit) }))
                .then(output => {
                if (this.nextRequest && output.LastEvaluatedKey) {
                    this.nextRequest = Object.assign(Object.assign({}, this.nextRequest), { ExclusiveStartKey: output.LastEvaluatedKey });
                }
                else {
                    this.nextRequest = undefined;
                }
                return Promise.resolve({
                    value: output,
                    done: false
                });
            });
        }
        return Promise.resolve({ done: true });
    }
}
exports.QueryPaginator = QueryPaginator;
//# sourceMappingURL=QueryPaginator.js.map