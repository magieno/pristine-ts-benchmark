import { DynamoDbPaginator } from './DynamoDbPaginator';
export class QueryPaginator extends DynamoDbPaginator {
    constructor(client, input, limit) {
        super(limit);
        this.client = client;
        this.nextRequest = Object.assign({}, input);
    }
    getNext() {
        if (this.nextRequest) {
            return this.client.query(Object.assign(Object.assign({}, this.nextRequest), { Limit: this.getNextPageSize(this.nextRequest.Limit) }))
                .then(output => {
                if (this.nextRequest && output.LastEvaluatedKey) {
                    this.nextRequest = Object.assign(Object.assign({}, this.nextRequest), { ExclusiveStartKey: output.LastEvaluatedKey });
                }
                else {
                    this.nextRequest = undefined;
                }
                return Promise.resolve({
                    value: output,
                    done: false
                });
            });
        }
        return Promise.resolve({ done: true });
    }
}
//# sourceMappingURL=QueryPaginator.js.map